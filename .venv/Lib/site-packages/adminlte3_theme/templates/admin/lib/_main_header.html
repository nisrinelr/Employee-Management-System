{% extends 'adminlte/lib/_main_header.html' %}
{% load adminlte_helpers i18n %}

{% block header_dropdowns %}
{% block user_info %}
            {% if request.user.is_authenticated %}
              <!-- Notifications Dropdown Menu -->
    <li class="nav-item dropdown">
      <a class="nav-link" data-toggle="dropdown" href="#">
          <i class="far fa-bell fa-2x"></i>
          <span class="badge badge-warning navbar-badge">{{ notifications.count }}</span>
      </a>
      <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
          <span class="dropdown-item dropdown-header">{{ notifications.count }} Notifications</span>
          <div class="dropdown-divider"></div>
          {% for notification in notifications %}
              <a href="#" class="dropdown-item">
                  <!-- Notification Content -->
                  <i class="fas fa-envelope mr-2"></i> {{ notification.message }}
                  <span class="float-right text-muted text-sm">{{ notification.timestamp }}</span>
              </a>
              <div class="dropdown-divider"></div>
          {% endfor %}
          <a href="#" class="dropdown-item dropdown-footer">See All Notifications</a>
      </div>
  </li>

            <li class="nav-item dropdown user-menu">
                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="true">
                  <img src="{%avatar_url 128 %}" class="user-image img-circle elevation-2" alt="User Image">
                  <span class="d-none d-md-inline">{% firstof request.user.get_short_name request.user.get_username %}</span>
                </a>
                <ul class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                  <!-- User image -->
                  <li class="user-header bg-primary">
                    <img src="{%avatar_url size=160 %}" class="img-circle elevation-2" alt="User Image">
        
                    <p>
                        {% firstof request.user.first_name request.user.last_name %} - {% firstof request.user.user_type %}
                      <small>Member since : {{ request.user.date_joined }}</small>
                    </p>
                  </li>
                  <!-- Menu Body -->
                  <li class="user-body">
                    <div class="row">
                      <div class="col-4 text-center">
                        <a href="#">Profile</a>
                      </div>
                    </div>
                    <!-- /.row -->
                  </li>
                  <!-- Menu Footer-->
                  <form action="{% block logout_url %}{% url 'admin:logout' %}{% endblock %}" method="post" id="logout-form">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-default btn-flat float-right">{% trans 'Sign Out' %}</button>
                  </form>
                  <li class="user-footer">
                    <a href="{% block change_password_url %}{% url 'admin:password_change' %}{% endblock %}" class="btn btn-default btn-flat">{% trans 'Change Password'%}</a>
                </li>                
                </ul>
              </li>
             
              {% endif %}

{% endblock user_info %}
{% endblock header_dropdowns %}


